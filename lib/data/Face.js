import{Data as e,logger as t}from"../utils/index.js";import{FacePath as a}from"../dir.js";import s from"node:fs";export const FaceJsonData=e.getJSON("json/FaceList.json","res");export const FaceList=Object.keys(FaceJsonData);export const FaceAlias=Object.fromEntries(Object.entries(FaceJsonData).map(([e,t])=>[e,t?t.split(","):[]]));export const FaceAliasIndex=Object.fromEntries(Object.entries(FaceAlias).flatMap(([e,t])=>t.map(t=>[t,e])));if(await e.isDirectory(a))try{(await s.promises.readdir(a,{withFileTypes:!0})).filter(e=>e.isDirectory()&&".git"!==e.name&&!e.name.startsWith(".")).map(e=>e.name).forEach(e=>{FaceList.includes(e)||FaceList.push(e),FaceAlias[e]??=[]})}catch(e){t.warn("载入自建表情文件夹时发生错误:",e)}