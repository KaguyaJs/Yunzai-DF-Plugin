import i from"yaml";import t from"../../../../lib/config/config.js";import o from"../../../../lib/plugins/config.js";import r from"node:path";import n from"node:fs/promises";import{PluginName as e,ResPath as s}from"../dir.js";export default await(new class{plugin_name=e;config={};configSave=async()=>{};async initCfg(){this.config=i.parse(await n.readFile(r.join(s,"config","default_config.yaml"),"utf8"));const t={};for(const i in this.config){t[i]={};for(const o in this.config[i])o.endsWith("Tips")&&(t[i][o]=this.config[i][o])}const{config:e,configSave:f}=await o(this.plugin_name,this.config,t,{replacer:i=>i.replace(/(\n.+?Tips:)/g,"\n$1")});return this.config=e,this.configSave=f,this}get masterQQ(){return t.masterQQ}get master(){return t.master}get AutoPath(){return this.config.CodeUpdate.List.some(i=>!!i?.AutoPath)}get sendMaster(){return this.config.sendMaster}get Poke(){return this.config.Poke}get other(){return this.config.other}get CodeUpdate(){return this.config.CodeUpdate}get summary(){return this.config.summary}get Picture(){return this.config.Picture}get proxy(){return this.config.proxy}getGroup(i="",o=""){return Array.isArray(Bot.uin)?t.getGroup(o,i):t.getGroup(i)}modify(i,t,o){return"object"!=typeof this.config[i]&&(this.config[i]={}),this.config[i][t]=o,this.configSave()}modifyarr(i,t,o,r="add"){return"object"!=typeof this.config[i]&&(this.config[i]={}),Array.isArray(this.config[i][t])||(this.config[i][t]=[]),"add"===r?this.config[i][t].includes(o)||this.config[i][t].push(o):this.config[i][t]=this.config[i][t].filter(i=>i!==o),this.configSave()}}).initCfg();